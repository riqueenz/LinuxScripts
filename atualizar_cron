#!/bin/bash
# Detectar distro
DISTRO="Desconhecido"
. /etc/os-release
echo " "
echo "Distribuição linux detectada:"
DISTRO=$ID
echo "$DISTRO"
echo " "

echo "Iniciando atualização"
echo "O script de atualização da Hidraumak foi executado pela última vez em:" > $HOME/0_data_atualizado.txt
echo $(date) >> $HOME/0_data_atualizado.txt

atualizar_scripts

snap refresh
echo " " >> $HOME/0_data_atualizado.txt
echo "Snap atualizado em:" >> $HOME/0_data_atualizado.txt
echo $(date) >> $HOME/0_data_atualizado.txt

flatpak update -y
echo " " >> $HOME/0_data_atualizado.txt
echo "Flatpak atualizado em:" >> $HOME/0_data_atualizado.txt
echo $(date) >> $HOME/0_data_atualizado.txt

pamac checkupdate --no-confirm
#pamac checkupdate --aur --no-confirm
echo " " >> $HOME/0_data_atualizado.txt
echo "Verificação das atualizações:" >> $HOME/0_data_atualizado.txt
echo $(date) >> $HOME/0_data_atualizado.txt

pamac upgrade --force-refresh --no-confirm
#pamac upgrade --aur --force-refresh --no-confirm
echo " " >> $HOME/0_data_atualizado.txt
echo "Instalação das atualizações:" >> $HOME/0_data_atualizado.txt
echo $(date) >> $HOME/0_data_atualizado.txt

pamac clean --no-confirm
echo " " >> $HOME/0_data_atualizado.txt
echo "Limpeza de pacotes:" >> $HOME/0_data_atualizado.txt
echo $(date) >> $HOME/0_data_atualizado.txt
echo "Obs: AUR desativado" >> $HOME/0_data_atualizado.txt
